#
# Check for:
#
# - 1 KeystoneAPI CR
# - 2 Secrets for fernet keys
# - 1 Pods for KeystoneAPI CR
#

apiVersion: keystone.openstack.org/v1beta1
kind: KeystoneAPI
metadata:
  finalizers:
  - KeystoneAPI
  name: keystone
spec:
  replicas: 1
status:
  readyCount: 1
---
apiVersion: v1
kind: Secret
metadata:
  name: keystone-fernet
  ownerReferences:
    - apiVersion: keystone.openstack.org/v1beta1
      blockOwnerDeletion: true
      controller: true
      kind: KeystoneAPI
      name: keystone
---
apiVersion: v1
kind: Secret
metadata:
  name: keystone-credential
  ownerReferences:
    - apiVersion: keystone.openstack.org/v1beta1
      blockOwnerDeletion: true
      controller: true
      kind: KeystoneAPI
      name: keystone
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: keystone
  ownerReferences:
    - apiVersion: keystone.openstack.org/v1beta1
      blockOwnerDeletion: true
      controller: true
      kind: KeystoneAPI
      name: keystone
spec:
  replicas: 1
status:
  availableReplicas: 1
